// Test array items using type reference

schema = ```eure
= [`$types.Item`]

@ $types.Item {
    id = `integer`
    name = `text`
}
```

output_json_schema = ```json
{
    "allOf": [
        {
            "type": "array",
            "items": {"$ref": "#/$defs/Item"}
        },
        {
            "$defs": {
                "Item": {
                    "type": "object",
                    "properties": {
                        "id": {"type": "integer"},
                        "name": {"type": "string"}
                    },
                    "required": ["id", "name"],
                    "additionalProperties": false
                }
            }
        }
    ]
}
```
