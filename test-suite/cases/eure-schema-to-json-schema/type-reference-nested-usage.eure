// Test type definition that references another type

schema = ```eure
= `$types.User`

@ $types.User {
    name = `text`
    settings = `$types.Settings`
}

@ $types.Settings {
    theme = `text`
    language = `text`
}
```

output_json_schema = ```json
{
    "allOf": [
        {"$ref": "#/$defs/User"},
        {
            "$defs": {
                "Settings": {
                    "type": "object",
                    "properties": {
                        "theme": {"type": "string"},
                        "language": {"type": "string"}
                    },
                    "required": ["language", "theme"],
                    "additionalProperties": false
                },
                "User": {
                    "type": "object",
                    "properties": {
                        "name": {"type": "string"},
                        "settings": {"$ref": "#/$defs/Settings"}
                    },
                    "required": ["name", "settings"],
                    "additionalProperties": false
                }
            }
        }
    ]
}
```
